<!DOCTYPE html>
<html>
<head>
    <title>Image Details - ZWO Camera</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <header>
        <h1>ZWO Camera - Image Details</h1>
        <nav>
            <ul>
                <li><a href="{{ url_for('index') }}">Latest</a></li>
                <li><a href="{{ url_for('gallery') }}">Gallery</a></li>
                <li><a href="{{ url_for('control_panel') }}">Control Panel</a></li>
                <li><a href="{{ url_for('system_status') }}">System Status</a></li>
            </ul>
        </nav>
    </header>
    
    <main>
        <div class="container">
            <div class="back-link">
                <a href="{{ url_for('gallery') }}">&larr; Back to Gallery</a>
            </div>
            
            <div class="image-detail-container">
                <h2>{{ image.filename }}</h2>
                
                <div class="image-detail-grid">
                    <div class="image-wrapper" id="imageWrapper">
                        <img id="zoomableImage" src="{{ url_for('serve_image', filename=image.filename) }}" 
                             alt="{{ image.filename }}" data-filename="{{ image.filename }}">
                    </div>
                    
                    <div class="image-details">
                        <div class="image-controls">
                            <button id="zoomIn">Zoom In</button>
                            <button id="zoomOut">Zoom Out</button>
                            <button id="resetZoom">Reset</button>
                            <span class="zoom-level">Zoom: <span id="zoomLevel">100%</span></span>
                        </div>
                        
                        <div class="metadata-panel">
                            <h3>Image Information</h3>
                            <table>
                                <tr>
                                    <th>Filename:</th>
                                    <td>{{ image.filename }}</td>
                                </tr>
                                {% if image.timestamp %}
                                <tr>
                                    <th>Captured:</th>
                                    <td>{{ image.timestamp }}</td>
                                </tr>
                                {% endif %}
                                {% if image.exposure_ms %}
                                <tr>
                                    <th>Exposure:</th>
                                    <td>{{ image.exposure_ms }} ms</td>
                                </tr>
                                {% endif %}
                                <tr>
                                    <th>File Size:</th>
                                    <td>{{ image.size_mb }} MB</td>
                                </tr>
                                <tr>
                                    <th>Last Modified:</th>
                                    <td>{{ image.modified }}</td>
                                </tr>
                            </table>
                            
                            <div class="action-buttons">
                                <a href="{{ url_for('serve_image', filename=image.filename) }}" 
                                   download="{{ image.filename }}" class="button">Download</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <footer>
        <p>ZWO Camera Web Interface</p>
    </footer>
    
    <script src="{{ url_for('static', filename='js/zoom.js') }}"></script>
</body>
</html>